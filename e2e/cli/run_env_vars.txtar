env API_TOKEN=sesame
env SQLITE_FILE=sqlite123.db
env
! exec $OPACTL run --addr ./ocp.sock --config config.d/bundle.yml &opactl&

exec curl --retry 5 --retry-all-errors --unix-socket ocp.sock http://localhost/health
exec curl --unix-socket ocp.sock -H 'Authorization: bearer sesame' http://localhost/v1/bundles

kill opactl
wait opactl
exec ls sqlite123.db # sqlite file in this dir, this means the dsn env var got replaced

-- config.d/bundle.yml --
tokens:
  api01:
    api_key: ${API_TOKEN}
    scopes:
    - role: viewer
database:
  sql:
    driver: sqlite3
    dsn: ${SQLITE_FILE}
bundles:
  hello-world:
    object_storage:
      filesystem:
        path: bundles/hello-world/bundle.tar.gz
